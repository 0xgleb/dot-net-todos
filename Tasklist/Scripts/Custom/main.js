// Generated by CoffeeScript 1.10.0
(function() {
  var ajax, event;

  ajax = {
    add: function(errors, input, resp) {
      return $.ajax('/Home/Index', {
        type: "POST",
        data: $('form').serialize(),
        beforeSend: function() {},
        success: function(response) {
          console.log(response);
          resp = response;
          if (response === -1) {
            return errors = true;
          }
        },
        timeout: 3000,
        error: function(request, errorType, errorMessage) {
          errors = true;
          return console.log("Error " + errorType + " with message: " + errorMessage + " [clientside]");
        },
        complete: function() {
          console.log("Loading finished! [clientside]");
          if (!errors) {
            return $('ul').append("<li data-id='" + resp + "'><input type='checkbox' /><span>" + input + "</span>  <button>Remove</button></li>");
          } else {
            return alert("Error!");
          }
        }
      });
    },
    change: function(id) {},
    remove: function() {}
  };

  event = {
    submit: function(event) {
      var errors, input, response;
      event.preventDefault();
      input = $('.editor-field input').val();
      console.log(input + " (input) [clientside]");
      errors = false;
      response = null;
      return ajax.add(errors, input, response);
    },
    dblclick: function() {
      var value;
      value = $(this).children('span').first();
      value.html("<input type=text value=" + (value.html()) + " autofocus/>");
      return console.log(this.attr("data-id"));
    }
  };

  $(document).on('ready', function() {
    $('#Task').focus();
    $('form').attr('autocomplete', 'off');
    $('form').on('submit', event.submit);
    return $('li').on('dblclick', event.dblclick);
  });

}).call(this);
